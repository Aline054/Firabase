import React from 'react';
import  {
     View,
     Text,
     StyleSheet ,
     SafeAreView ,
     TextInput, 
     TouchableOpacity 
    } from 'react-native';

import firebase from '../../servicer'

export default function Login(){
const[type, setType]= useState('Cadastro');

const [email,setEmil ] = useState('');
const[ password, setPassword ] = useState('');
 

function handleLogin(){
    
    if(type === ' login'){
        //Aqui fazemos o login
        const user = firebase.auth().signInWithEmailAndPassword(email,password)
        .then(( user)=> {
            console.log(user.user.uid)
        })
   .catch((err) =>{
       console.log(err);
       alert('Ops parece que deu algum erro.');
       return;
   })

    }else{
        //Aqui cadastramos o usuario
        const user = firebase.auth().signInWithEmailAndPassword(email,password)
        .then(( user)=> {
            console.log(user.user.uid)
        })
        .catch((err) =>{
            console.log(err);
            alert('Ops parece que algo está errado.');
            return;
        })


    }
}

return (
    <SafeAreView style= {styles.container }>
   
    <TextInput 
    placeholder="Seu email"
    style={styles.input}
    value={email}
    onChangeText={ (text ) => setEmail(text) }
    />
   <TextInput
   placeholder="*********"
   style={styles.input}
   value={email}
   onChangeText= { (text) => setEmil(text) }
 />
   <TouchableOpacity
   style={[styles.handleLogin, { backgroundColor: type === 'login' ? '#3ea6f2' : '#141414'  } ]}
   onPress={handleLogin}
   >
       <Text> style={styles.loginText}
       { type === 'login' ? 'Acessar' : 'Cadastrar'}</Text>
       </TouchableOpacity>

       <TouchaleOpacity onPress={ () => setType(type => type === 'login' ? 'cadastra':'login')}>
           <Text style={{ textAlign: 'center '}}> 
           {type === 'login'  ? 'Criar uma conta' : 'Já passuo uma conta.'}
           </Text>
       </TouchaleOpacity>



    </SafeAreView>

  );
}
const styles = StyleSheet.create({
container:{
    flex:1,
    paddingTop:40,
    backgroundColor:'#F2f6fc',
    paddingHorizontal: 10,
},
input:{
    marginBottom:10,
    backgroundColor:'#FFF',
    borderRadius: 4,
    height:45,
    padding:10,
    boorderWidth:1,
    booderColor:'#14141414'
},
handleLogin:{
    alignItems:'center',
    justifyContent:'center',
    backgroundColor:'#141414',
    height:45,
    marginBottom:10,
},
  loginText:{
      color:'#FFF',
      fontSize:17,
  }
})